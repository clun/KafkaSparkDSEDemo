#!/bin/bash

echo "install kafka"
#standup the docs
#install kafka
mkdir /opt
mkdir /opt/kafka
wget -P /tmp/ http://apache.claz.org/kafka/0.10.2.0/kafka_2.11-0.10.2.0.tgz
tar -xvf /tmp/kafka_2.11-0.10.2.0.tgz -C /opt/kafka

git submodule update --init
git submodule sync

echo "start kafka"
nohup /opt/kafka/bin/kafka-server-start.sh /opt/kafka/config/server.properties &

echo "create kafka topic"
/opt/kafka/bin/kafka-topics.sh --zookeeper localhost:2181 --create --replication-factor 1 --partitions 1 --topic stream_ts
